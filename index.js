require('dotenv').config()
const { Telegraf, Markup } = require('telegraf')
const data = require('./data.js')

const bot = new Telegraf(process.env.BOT_TOKEN)

bot.command('start', (ctx) => {
	ctx.replyWithHTML('<b><i><u>–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é, –º–æ–π –º–∏–ª—ã–π –ñ–∏—Ä–∞—Ñ—á–∏–∫ ü¶í</u></i></b>\n\n–ü–µ—Ä–µ–¥ —Ç–æ–±–æ–π <u><b>—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –±–æ—Ç</b></u> ü§ñ, —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å –æ–¥–Ω–æ–π –∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π —Ü–µ–ª—å—é - –ø–æ–∑–¥—Ä–∞–≤–∏—Ç—å —Ç–µ–±—è —Å <u><b>–î–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è‚ùï</b></u> üéÇ\n\n–ö–∞–∫ —Ç–æ–ª—å–∫–æ —Ç—ã –Ω–∞–∂–º–µ—à—å –Ω–∞ –∫–Ω–æ–ø–∫—É –≤–Ω–∏–∑—É ‚è¨, –æ–Ω –Ω–∞—á–Ω–µ—Ç –ø–æ–∑–¥—Ä–∞–≤–ª—è—Ç—å —Ç–µ–±—è, —Ä–∞–∑–≤–µ –ª–∏ —ç—Ç–æ –Ω–µ –∫—Ä—É—Ç–æ? ü§©\n\n<i>–í—Å–µ–≥–æ –±—É–¥–µ—Ç 9Ô∏è‚É£9Ô∏è‚É£ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–π, –≤–µ–¥—å —ç—Ç–æ –≤–æ–ª—à–µ–±–Ω–æ–µ —á–∏—Å–ª–æ üßô‚Äç‚ôÄÔ∏è, –µ—Å–ª–∏ —Ç—ã –ø–æ–Ω–∏–º–∞–µ—à—å –æ —á–µ–º —è üòâ\n\n–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –¥–µ–≤—è—Ç–∫–∏ –≤ —ç—Ç–æ–º –±–æ—Ç–µ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –≤–µ–∑–¥–µ - –Ω–∞ –∞–≤–∞—Ç–∞—Ä–∫–µ, –≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–π –∏ –¥–∞–∂–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ –æ—Ç–∫—Ä—ã—Ç–æ–∫ - –ø–æ —Å–∞–º–æ–π —à–∏—Ä–æ–∫–æ–π —Å—Ç–æ—Ä–æ–Ω–µ –æ–Ω–∏ –≤—Å–µ –ø–æ 999 –ø–∏–∫—Å–µ–ª–µ–π üòè\n\n<b>It\'s Magic... üîÆ</b></i>\n\n–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å—á–∏—Ç–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Å—Ç–∞–ª–æ—Å—å –¥–æ –∫–æ–Ω—Ü–∞ —Ç–≤–æ–µ–≥–æ –î–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è ‚è∞ –∏ –≤ —Ä–∞–≤–Ω—ã—Ö –¥–æ–∑–∞—Ö –±—É–¥–µ—Ç –ø—Ä–∏—Å—ã–ª–∞—Ç—å —Ç–µ–±–µ –Ω–æ–≤–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç –º–µ–Ω—è‚ùï üéâ\n\n–ü–æ—ç—Ç–æ–º—É –Ω–µ —Å—Ç–æ–∏—Ç –º–µ–¥–ª–∏—Ç—å, —Å–∫–æ—Ä–µ–µ –Ω–∞–∂–∏–º–∞–π –∫–Ω–æ–ø–∫—É –≤–Ω–∏–∑—É üëá\n\n<b><i>–¢—ã –≥–æ—Ç–æ–≤–∞‚ùî</i></b>', Markup.inlineKeyboard([
		[Markup.button.callback('–ö–æ–Ω–µ—á–Ω–æ —è –≥–æ—Ç–æ–≤–∞‚ùïüôåüê∞üòä', 'yep')]
	]))
})

bot.action('yep', async (ctx) => {
	setTimeout(async () => {
		await ctx.answerCbQuery()
		const date = new Date()
		const birthday = new Date(2022, 6, 10, 0, 0, 0)
		const gap = (birthday - date) / 99
		let index = 1
		setInterval(async () => {
			if (index < data.length + 1) {
				await ctx.replyWithPhoto({ source: `./img/${index}.jpg` })
				await ctx.replyWithHTML(`<i>${data[index - 1]}</i>\n\n<b>–¢–≤–æ–π –ö–æ—Ç üòΩ</b>`)
				index += 1
			}
		}, gap)
	}, 1000)
})

bot.launch()